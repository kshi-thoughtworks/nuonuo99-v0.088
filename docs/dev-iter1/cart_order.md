## 购物车与订单管理, 用户管理

购物车与订单有很多微妙的联系, 一起处理有助于获得一致性体验.

后续还要与婚礼方案, 档期挂钩.

二者都建立在用户的概念基础之上. 需要先建立用户系统的框架.

#### 用户系统 -- 框架

###### 消费者用户

1. 匿名用户. 未登录
2. 普通用户. 快速注册. 体验 DIY 流程, 但不能下单. 输入用户名 / 密码即可注册.
3. 认证用户. 手机注册. DIY, 约约约, 买买买.

###### 商家

1. 标准产品供应商
2. 摄影师, 化妆师 等专家.

#### 购物车

###### 用户权限约定

1. 未登录用户, 只能浏览, 不能添加商品到购物车.
2. 用户登录后, 才可以选购并生成婚礼方案. 普通用户也可以体验.
3. 只有认证用户可以下单购买.

###### 数据库设计

购物车中的数据, 本质是一个婚礼方案, 未下单的婚礼方案存于 draft 表中.

价格等商品信息, 从网站上实时获取最新数据.

- draft
    - User ID
    - 产品 ID
    - 数量
    - 加入购物车时间
    - 婚礼 ID / 婚礼方案 ID, 外键

- weding-info
    - date
    - location
    - 桌数
    - 预算

#### 订单

###### 购买信息

下单结算后, 生成一张订单, 包含交易双方的关键信息, 商品信息快照等.

每一个订单, 有一个 订单 ID

###### 订单实施信息 -- 跟踪与协同编辑

关键在于, 供应商实时更新进展.

标准产品供应商更新花艺产品准备的进展信息, 上传最新效果图.

司仪上传策划案, 根据用户需求更新策划案.

- acting
    - 订单 ID
    - User ID
    - 供应商 ID
    - 状态
    - 详细说明, 图文

###### 交易成功, 评价
